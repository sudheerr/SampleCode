// Generated by CoffeeScript 1.8.0
Ext.define('Corefw.view.grid.pivot.ValueColumn', {
  extend: 'Ext.grid.column.Number',
  alias: 'widget.pivotvaluecolumn',
  align: 'right',
  menuDisabled: true,
  initComponent: function() {
    this.autoEl = {
      'data-qtip': "" + this.text + " - " + this.aggregation
    };
    this.text = "" + this.text + "<span style=\"font-size:8px\"><sub>" + this.aggregation + "</sub></span>";
    return this.callParent(arguments);
  },
  listeners: {
    beforerender: function(me) {
      var average, gridColumns, gridview, isLast, unusedWidth;
      gridview = me.up('grid').view;
      unusedWidth = gridview.el.dom.scrollWidth - gridview.body.getWidth();
      if (unusedWidth > 0) {
        gridColumns = gridview.getGridColumns();
        isLast = gridColumns.indexOf(me) === gridColumns.length - 1;
        average = Math.floor(unusedWidth / gridColumns.length);
        return me.width += isLast ? unusedWidth - average * (gridColumns.length - 1) : average;
      }
    }
  }
});
