// Generated by CoffeeScript 1.8.0

/*
	A grouped grid is actually a tree
	implements a tree with multiple columns, similar to a grid
	the tree is in the first column
 */
Ext.define('Corefw.view.tree.GroupedTreeGrid', {
  extend: 'Corefw.view.tree.TreeFieldBase',
  xtype: 'coregroupedtreegrid',
  statics: {
    createDataCache: function(dataFieldItem, fieldCache) {
      var props;
      props = fieldCache != null ? fieldCache._myProperties : void 0;
      props.data = props.values;
      delete props.values;
    }
  },
  configureTree: function() {
    var column, columns, newColumnObj, props, treeCache, treeColumns, _i, _len;
    this.callParent(arguments);
    treeCache = this.cache;
    columns = [];
    this.treeConfig.columns = columns;
    newColumnObj = {
      xtype: 'treecolumn',
      width: 200,
      dataIndex: 'text'
    };
    columns.push(newColumnObj);
    treeColumns = treeCache._myProperties.columnAr;
    if (treeColumns && treeColumns.length) {
      for (_i = 0, _len = treeColumns.length; _i < _len; _i++) {
        column = treeColumns[_i];
        props = column._myProperties;
        newColumnObj = {
          text: props.title,
          dataIndex: props.pathString,
          width: 150
        };
        columns.push(newColumnObj);
      }
    }
  }
});
