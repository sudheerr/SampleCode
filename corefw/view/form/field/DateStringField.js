// Generated by CoffeeScript 1.8.0
Ext.define('Corefw.view.form.field.DateStringField', {
  extend: 'Ext.form.field.Date',
  mixins: ['Corefw.mixin.CoreField'],
  xtype: 'coredatestringfield',
  showToday: false,
  labelSeparator: '',
  format: 'Y-m-d H:i:s',
  generatePostData: function() {
    var fieldObj, val;
    val = this.getValue() || '';
    if (val) {
      val = Ext.Date.format(val, 'Y-m-d H:i:s');
    }
    fieldObj = {
      name: this.name,
      value: val
    };
    return fieldObj;
  },
  setValue: function() {
    var value;
    value = arguments[0];
    if ('string' === typeof value) {
      arguments[0] = (Ext.Date.parse(value, 'Y-m-d H:i:s')) || (Ext.Date.parse(value, this.format));
    }
    return this.callParent(arguments);
  },
  initComponent: function() {
    var fieldProps;
    if (this.cache) {
      fieldProps = this.cache._myProperties;
    } else if (this.column.cache) {
      fieldProps = this.column.cache._myProperties;
    }
    this.applyConfig(fieldProps);
    return this.callParent(arguments);
  },
  applyConfig: function(fieldProps) {
    var config, maxDate, minDate;
    minDate = fieldProps.minDate;
    maxDate = fieldProps.maxDate;
    config = {
      minValue: minDate !== '' && minDate !== void 0 ? new Date(minDate) : null,
      maxValue: maxDate !== '' && maxDate !== void 0 ? new Date(maxDate) : null
    };
    if (!Ext.isEmpty(fieldProps.format)) {
      config.format = fieldProps.format;
    }
    return Ext.merge(this, config);
  }
});
